<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory VDFConsensus</title>
</head>


<body>
<div class="head">
<h1>Theory VDFConsensus</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="VDFConsensus.html"><span>VDFConsensus</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../HOL/HOL/Main.html"><span>Main</span></a><span> </span><span class="quoted"><span>"</span><a href="HOL-Library.FSet.html"><span>HOL-Library.FSet</span></a><span>"</span></span><span> </span><span class="quoted"><span>"</span><a href="HOL-Statespace.StateSpaceSyntax.html"><span>HOL-Statespace.StateSpaceSyntax</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Messages"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹First we define a datatype of messages.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.msg.size_neq|fact"><span class="entity_def" id="VDFConsensus.msg.size_gen_o_map|fact"><span class="entity_def" id="VDFConsensus.msg.size_gen|fact"><span class="entity_def" id="VDFConsensus.msg.size|fact"><span class="entity_def" id="VDFConsensus.arity_size_msg|fact"><span class="entity_def" id="VDFConsensus.msg.size_msg_overloaded_def|fact"><span class="entity_def" id="VDFConsensus.size_msg_inst.size_msg|fact"><span class="entity_def" id="VDFConsensus.msg.size_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.Quotient|fact"><span class="entity_def" id="VDFConsensus.msg.Domainp_rel|fact"><span class="entity_def" id="VDFConsensus.msg.right_unique_rel|fact"><span class="entity_def" id="VDFConsensus.msg.left_unique_rel|fact"><span class="entity_def" id="VDFConsensus.msg.right_total_rel|fact"><span class="entity_def" id="VDFConsensus.msg.left_total_rel|fact"><span class="entity_def" id="VDFConsensus.msg.bi_unique_rel|fact"><span class="entity_def" id="VDFConsensus.msg.bi_total_rel|fact"><span class="entity_def" id="VDFConsensus.msg.simps|fact"><span class="entity_def" id="VDFConsensus.msg.rel_induct|fact"><span class="entity_def" id="VDFConsensus.msg.rec_transfer|fact"><span class="entity_def" id="VDFConsensus.msg.rec_o_map|fact"><span class="entity_def" id="VDFConsensus.msg.rec|fact"><span class="entity_def" id="VDFConsensus.msg.induct|fact"><span class="entity_def" id="VDFConsensus.msg.set_intros|fact"><span class="entity_def" id="VDFConsensus.msg.set_cases|fact"><span class="entity_def" id="VDFConsensus.msg.set|fact"><span class="entity_def" id="VDFConsensus.msg.rel_intros|fact"><span class="entity_def" id="VDFConsensus.msg.rel_inject|fact"><span class="entity_def" id="VDFConsensus.msg.rel_distinct|fact"><span class="entity_def" id="VDFConsensus.msg.rel_cases|fact"><span class="entity_def" id="VDFConsensus.msg.pred_inject|fact"><span class="entity_def" id="VDFConsensus.msg.map|fact"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer|fact"><span class="entity_def" id="VDFConsensus.msg.case_transfer|fact"><span class="entity_def" id="VDFConsensus.msg.splits|fact"><span class="entity_def" id="VDFConsensus.msg.split_asm|fact"><span class="entity_def" id="VDFConsensus.msg.split|fact"><span class="entity_def" id="VDFConsensus.msg.nchotomy|fact"><span class="entity_def" id="VDFConsensus.msg.inject|fact"><span class="entity_def" id="VDFConsensus.msg.exhaust|fact"><span class="entity_def" id="VDFConsensus.msg.distinct|fact"><span class="entity_def" id="VDFConsensus.msg.case_distrib|fact"><span class="entity_def" id="VDFConsensus.msg.case_cong_weak|fact"><span class="entity_def" id="VDFConsensus.msg.case_cong|fact"><span class="entity_def" id="VDFConsensus.msg.case|fact"><span class="entity_def" id="VDFConsensus.msg.eq.simps|fact"><span class="entity_def" id="VDFConsensus.msg.eq.refl|fact"><span class="entity_def" id="VDFConsensus.arity_equal_msg|fact"><span class="entity_def" id="VDFConsensus.equal_msg_def|fact"><span class="entity_def" id="VDFConsensus.equal_msg_inst.equal_msg|fact"><span class="entity_def" id="VDFConsensus.arity_partial_term_of_msg|fact"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_triv|fact"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_inst.partial_term_of_msg|fact"><span class="entity_def" id="VDFConsensus.arity_term_of_msg|fact"><span class="entity_def" id="VDFConsensus.term_of_msg_triv|fact"><span class="entity_def" id="VDFConsensus.term_of_msg_inst.term_of_msg|fact"><span class="entity_def" id="VDFConsensus.msg.case_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.ctor_rec_msg_def|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.set_transfer|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.set_map|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_transfer|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_transp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_symp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_reflp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_refl_strong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_refl|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_cong_simp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_cong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_mono_strong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_mono|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_map|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_Grp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_flip|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_eq_onp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_eq|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_conversep|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_compp_Grp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_compp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_set|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_True|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_transfer|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_rel|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_map|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_cong_simp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_cong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_mono_strong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_mono|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_ident_strong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_ident|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_transfer|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_id0|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_id|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong_pred|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong_simp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong0|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_comp|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.inj_map_strong|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.inj_map|fact"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.in_rel|fact"><span class="entity_def" id="VDFConsensus.msg.wit_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.pred_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.rel_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.set_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.map_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.dtor_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.ctor_fold_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.ctor_msg_def|fact"><span class="entity_def" id="VDFConsensus.arity_typerep_msg|fact"><span class="entity_def" id="VDFConsensus.typerep_msg_def|fact"><span class="entity_def" id="VDFConsensus.typerep_msg_inst.typerep_msg|fact"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.Rep_msg|fact"><span class="entity_def" id="VDFConsensus.msg.type_definition_msg|fact"><span class="entity_def" id="VDFConsensus.arity_type_msg|fact"><span class="entity_def" id="VDFConsensus.msg.str_init_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.arity_typerep_msg_IITN_msg|fact"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_inst.typerep_msg_IITN_msg|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg|fact"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.type_definition_msg_IITN_msg|fact"><span class="entity_def" id="VDFConsensus.arity_type_msg_IITN_msg|fact"><span class="entity_def" id="VDFConsensus.msg.min_alg_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.mor_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.alg_msg_def|fact"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set2_pre_msg_def|fact"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set1_pre_msg_def|fact"><span class="entity_def" id="VDFConsensus.pre_msg.msg.rel_pre_msg_def|fact"><span class="entity_def" id="VDFConsensus.pre_msg.msg.map_pre_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.arity_typerep_msg_pre_msg|fact"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_def|fact"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_inst.typerep_msg_pre_msg|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_induct|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_cases|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_inject|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_inverse|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg|fact"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.type_definition_msg_pre_msg|fact"><span class="entity_def" id="VDFConsensus.arity_type_msg_pre_msg|fact"><span class="entity_def" id="VDFConsensus.msg.size_neq|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen_o_map|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen(5)|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen(4)|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen(3)|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen(2)|thm"><span class="entity_def" id="VDFConsensus.msg.size_gen(1)|thm"><span class="entity_def" id="VDFConsensus.msg.size(10)|thm"><span class="entity_def" id="VDFConsensus.msg.size(9)|thm"><span class="entity_def" id="VDFConsensus.msg.size(8)|thm"><span class="entity_def" id="VDFConsensus.msg.size(7)|thm"><span class="entity_def" id="VDFConsensus.msg.size(6)|thm"><span class="entity_def" id="VDFConsensus.msg.size(5)|thm"><span class="entity_def" id="VDFConsensus.msg.size(4)|thm"><span class="entity_def" id="VDFConsensus.msg.size(3)|thm"><span class="entity_def" id="VDFConsensus.msg.size(2)|thm"><span class="entity_def" id="VDFConsensus.msg.size(1)|thm"><span class="entity_def" id="VDFConsensus.arity_size_msg|thm"><span class="entity_def" id="VDFConsensus.msg.size_msg_overloaded_def|thm"><span class="entity_def" id="VDFConsensus.size_msg_inst.size_msg|thm"><span class="entity_def" id="VDFConsensus.msg.size_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.Quotient|thm"><span class="entity_def" id="VDFConsensus.msg.Domainp_rel|thm"><span class="entity_def" id="VDFConsensus.msg.right_unique_rel|thm"><span class="entity_def" id="VDFConsensus.msg.left_unique_rel|thm"><span class="entity_def" id="VDFConsensus.msg.right_total_rel|thm"><span class="entity_def" id="VDFConsensus.msg.left_total_rel|thm"><span class="entity_def" id="VDFConsensus.msg.bi_unique_rel|thm"><span class="entity_def" id="VDFConsensus.msg.bi_total_rel|thm"><span class="entity_def" id="VDFConsensus.msg.simps(70)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(69)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(68)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(67)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(66)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(65)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(64)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(63)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(62)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(61)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(60)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(59)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(58)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(57)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(56)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(55)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(54)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(53)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(52)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(51)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(50)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(49)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(48)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(47)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(46)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(45)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(44)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(43)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(42)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(41)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(40)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(39)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(38)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(37)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(36)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(35)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(34)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(33)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(32)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(31)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(30)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(29)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(28)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(27)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(26)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(25)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(24)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(23)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(22)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(21)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(20)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(19)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(18)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(17)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(16)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(15)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(14)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(13)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(12)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(11)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(10)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(9)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(8)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(7)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(6)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(5)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(4)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(3)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(2)|thm"><span class="entity_def" id="VDFConsensus.msg.simps(1)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_induct|thm"><span class="entity_def" id="VDFConsensus.msg.rec_transfer|thm"><span class="entity_def" id="VDFConsensus.msg.rec_o_map|thm"><span class="entity_def" id="VDFConsensus.msg.rec(5)|thm"><span class="entity_def" id="VDFConsensus.msg.rec(4)|thm"><span class="entity_def" id="VDFConsensus.msg.rec(3)|thm"><span class="entity_def" id="VDFConsensus.msg.rec(2)|thm"><span class="entity_def" id="VDFConsensus.msg.rec(1)|thm"><span class="entity_def" id="VDFConsensus.msg.induct|thm"><span class="entity_def" id="VDFConsensus.msg.set_intros(5)|thm"><span class="entity_def" id="VDFConsensus.msg.set_intros(4)|thm"><span class="entity_def" id="VDFConsensus.msg.set_intros(3)|thm"><span class="entity_def" id="VDFConsensus.msg.set_intros(2)|thm"><span class="entity_def" id="VDFConsensus.msg.set_intros(1)|thm"><span class="entity_def" id="VDFConsensus.msg.set_cases|thm"><span class="entity_def" id="VDFConsensus.msg.set(5)|thm"><span class="entity_def" id="VDFConsensus.msg.set(4)|thm"><span class="entity_def" id="VDFConsensus.msg.set(3)|thm"><span class="entity_def" id="VDFConsensus.msg.set(2)|thm"><span class="entity_def" id="VDFConsensus.msg.set(1)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_intros(5)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_intros(4)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_intros(3)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_intros(2)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_intros(1)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_inject(5)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_inject(4)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_inject(3)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_inject(2)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_inject(1)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(20)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(19)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(18)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(17)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(16)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(15)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(14)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(13)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(12)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(11)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(10)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(9)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(8)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(7)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(6)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(5)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(4)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(3)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(2)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_distinct(1)|thm"><span class="entity_def" id="VDFConsensus.msg.rel_cases|thm"><span class="entity_def" id="VDFConsensus.msg.pred_inject(5)|thm"><span class="entity_def" id="VDFConsensus.msg.pred_inject(4)|thm"><span class="entity_def" id="VDFConsensus.msg.pred_inject(3)|thm"><span class="entity_def" id="VDFConsensus.msg.pred_inject(2)|thm"><span class="entity_def" id="VDFConsensus.msg.pred_inject(1)|thm"><span class="entity_def" id="VDFConsensus.msg.map(5)|thm"><span class="entity_def" id="VDFConsensus.msg.map(4)|thm"><span class="entity_def" id="VDFConsensus.msg.map(3)|thm"><span class="entity_def" id="VDFConsensus.msg.map(2)|thm"><span class="entity_def" id="VDFConsensus.msg.map(1)|thm"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer(5)|thm"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer(4)|thm"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer(3)|thm"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer(2)|thm"><span class="entity_def" id="VDFConsensus.msg.ctr_transfer(1)|thm"><span class="entity_def" id="VDFConsensus.msg.case_transfer|thm"><span class="entity_def" id="VDFConsensus.msg.splits(2)|thm"><span class="entity_def" id="VDFConsensus.msg.splits(1)|thm"><span class="entity_def" id="VDFConsensus.msg.split_asm|thm"><span class="entity_def" id="VDFConsensus.msg.split|thm"><span class="entity_def" id="VDFConsensus.msg.nchotomy|thm"><span class="entity_def" id="VDFConsensus.msg.inject(5)|thm"><span class="entity_def" id="VDFConsensus.msg.inject(4)|thm"><span class="entity_def" id="VDFConsensus.msg.inject(3)|thm"><span class="entity_def" id="VDFConsensus.msg.inject(2)|thm"><span class="entity_def" id="VDFConsensus.msg.inject(1)|thm"><span class="entity_def" id="VDFConsensus.msg.exhaust|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(20)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(19)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(18)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(17)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(16)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(15)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(14)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(13)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(12)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(11)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(10)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(9)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(8)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(7)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(6)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(5)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(4)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(3)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(2)|thm"><span class="entity_def" id="VDFConsensus.msg.distinct(1)|thm"><span class="entity_def" id="VDFConsensus.msg.case_distrib|thm"><span class="entity_def" id="VDFConsensus.msg.case_cong_weak|thm"><span class="entity_def" id="VDFConsensus.msg.case_cong|thm"><span class="entity_def" id="VDFConsensus.msg.case(5)|thm"><span class="entity_def" id="VDFConsensus.msg.case(4)|thm"><span class="entity_def" id="VDFConsensus.msg.case(3)|thm"><span class="entity_def" id="VDFConsensus.msg.case(2)|thm"><span class="entity_def" id="VDFConsensus.msg.case(1)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(45)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(44)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(43)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(42)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(41)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(40)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(39)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(38)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(37)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(36)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(35)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(34)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(33)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(32)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(31)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(30)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(29)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(28)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(27)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(26)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(25)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(24)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(23)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(22)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(21)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(20)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(19)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(18)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(17)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(16)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(15)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(14)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(13)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(12)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(11)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(10)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(9)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(8)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(7)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(6)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(5)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(4)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(3)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(2)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.simps(1)|thm"><span class="entity_def" id="VDFConsensus.msg.eq.refl|thm"><span class="entity_def" id="VDFConsensus.arity_equal_msg|thm"><span class="entity_def" id="VDFConsensus.equal_msg_def|thm"><span class="entity_def" id="VDFConsensus.equal_msg_inst.equal_msg|thm"><span class="entity_def" id="VDFConsensus.arity_partial_term_of_msg|thm"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_triv|thm"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_inst.partial_term_of_msg|thm"><span class="entity_def" id="VDFConsensus.arity_term_of_msg|thm"><span class="entity_def" id="VDFConsensus.term_of_msg_triv|thm"><span class="entity_def" id="VDFConsensus.term_of_msg_inst.term_of_msg|thm"><span class="entity_def" id="VDFConsensus.msg.case_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.ctor_rec_msg_def|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.set_transfer|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.set_map|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_transfer|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_transp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_symp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_reflp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_refl_strong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_refl|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_cong_simp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_cong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_mono_strong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_mono|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_map(2)|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_map(1)|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_Grp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_flip|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_eq_onp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_eq|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_conversep|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_compp_Grp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.rel_compp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_set|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_True|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_transfer|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_rel|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_map|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_cong_simp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_cong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_mono_strong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.pred_mono|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_ident_strong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_ident|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_transfer|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_id0|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_id|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong_pred|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong_simp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_cong0|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.map_comp|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.inj_map_strong|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.inj_map|thm"><span class="entity_def" id="VDFConsensus.VDFConsensus.msg.in_rel|thm"><span class="entity_def" id="VDFConsensus.msg.wit_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.pred_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.rel_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.set_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.map_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.dtor_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.ctor_fold_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.ctor_msg_def|thm"><span class="entity_def" id="VDFConsensus.arity_typerep_msg|thm"><span class="entity_def" id="VDFConsensus.typerep_msg_def|thm"><span class="entity_def" id="VDFConsensus.typerep_msg_inst.typerep_msg|thm"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.Abs_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.Rep_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.Rep_msg|thm"><span class="entity_def" id="VDFConsensus.msg.type_definition_msg|thm"><span class="entity_def" id="VDFConsensus.arity_type_msg|thm"><span class="entity_def" id="VDFConsensus.msg.str_init_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.arity_typerep_msg_IITN_msg|thm"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_inst.typerep_msg_IITN_msg|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg|thm"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.type_definition_msg_IITN_msg|thm"><span class="entity_def" id="VDFConsensus.arity_type_msg_IITN_msg|thm"><span class="entity_def" id="VDFConsensus.msg.min_alg_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.mor_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.alg_msg_def|thm"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set2_pre_msg_def|thm"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set1_pre_msg_def|thm"><span class="entity_def" id="VDFConsensus.pre_msg.msg.rel_pre_msg_def|thm"><span class="entity_def" id="VDFConsensus.pre_msg.msg.map_pre_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.arity_typerep_msg_pre_msg|thm"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_def|thm"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_inst.typerep_msg_pre_msg|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_induct|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_cases|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_inject|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg_inverse|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg|thm"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.type_definition_msg_pre_msg|thm"><span class="entity_def" id="VDFConsensus.arity_type_msg_pre_msg|thm"><span class="entity_def" id="VDFConsensus.msg.size_msg_overloaded_def|axiom"><span class="entity_def" id="VDFConsensus.size_msg_inst.size_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.size_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.rec_msg_def|axiom"><span class="entity_def" id="VDFConsensus.equal_msg_def_raw|axiom"><span class="entity_def" id="VDFConsensus.equal_msg_inst.equal_msg_def|axiom"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_triv_raw|axiom"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_inst.partial_term_of_msg_def|axiom"><span class="entity_def" id="VDFConsensus.term_of_msg_triv_raw|axiom"><span class="entity_def" id="VDFConsensus.term_of_msg_inst.term_of_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.case_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.MPair_def|axiom"><span class="entity_def" id="VDFConsensus.msg.MSet_def|axiom"><span class="entity_def" id="VDFConsensus.msg.VDF_def|axiom"><span class="entity_def" id="VDFConsensus.msg.Nonce_def|axiom"><span class="entity_def" id="VDFConsensus.msg.Val_def|axiom"><span class="entity_def" id="VDFConsensus.msg.ctor_rec_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.wit_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.pred_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.rel_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.set_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.map_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.dtor_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.ctor_fold_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.ctor_msg_def|axiom"><span class="entity_def" id="VDFConsensus.typerep_msg_def_raw|axiom"><span class="entity_def" id="VDFConsensus.typerep_msg_inst.typerep_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.type_definition_msg|axiom"><span class="entity_def" id="VDFConsensus.arity_type_msg|axiom"><span class="entity_def" id="VDFConsensus.msg.str_init_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_def_raw|axiom"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_inst.typerep_msg_IITN_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.type_definition_msg_IITN_msg|axiom"><span class="entity_def" id="VDFConsensus.arity_type_msg_IITN_msg|axiom"><span class="entity_def" id="VDFConsensus.msg.min_alg_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.mor_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.alg_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.wit_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.pred_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.rel_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set2_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set1_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.pre_msg.msg.map_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_def_raw|axiom"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_inst.typerep_msg_pre_msg_def|axiom"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.type_definition_msg_pre_msg|axiom"><span class="entity_def" id="VDFConsensus.arity_type_msg_pre_msg|axiom"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.pred_raw_sum_def|axiom"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.rel_raw_sum_def|axiom"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.map_raw_sum_def|axiom"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum2.sum.Sum_Type.set_raw_sum_def|axiom"><span class="entity_def" id="VDFConsensus.size_msg_inst.size_msg|const"><span class="entity_def" id="VDFConsensus.msg.size_msg|const"><span class="entity_def" id="VDFConsensus.equal_msg_inst.equal_msg|const"><span class="entity_def" id="VDFConsensus.partial_term_of_msg_inst.partial_term_of_msg|const"><span class="entity_def" id="VDFConsensus.term_of_msg_inst.term_of_msg|const"><span class="entity_def" id="VDFConsensus.msg.case_msg|const"><span class="entity_def" id="VDFConsensus.typerep_msg_inst.typerep_msg|const"><span class="entity_def" id="VDFConsensus.msg.Abs_msg|const"><span class="entity_def" id="VDFConsensus.msg.Rep_msg|const"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_IITN_msg_inst.typerep_msg_IITN_msg|const"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Abs_msg_IITN_msg|const"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg.Rep_msg_IITN_msg|const"><span class="entity_def" id="VDFConsensus.msg.mor_msg|const"><span class="entity_def" id="VDFConsensus.msg.alg_msg|const"><span class="entity_def" id="VDFConsensus.msg.typerep_msg_pre_msg_inst.typerep_msg_pre_msg|const"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Abs_msg_pre_msg|const"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg.Rep_msg_pre_msg|const"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.pred_raw_sum|const"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.rel_raw_sum|const"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum.Sum_Type.map_raw_sum|const"><span class="entity_def" id="VDFConsensus.raw_sum.msg.sum2.sum.Sum_Type.set_raw_sum|const"><span class="entity_def" id="VDFConsensus.msg.msg_IITN_msg|type"><span>datatype</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="VDFConsensus.msg.rec_msg|const"><span class="entity_def" id="VDFConsensus.msg.ctor_rec_msg|const"><span class="entity_def" id="VDFConsensus.msg.wit_msg|const"><span class="entity_def" id="VDFConsensus.msg.pred_msg|const"><span class="entity_def" id="VDFConsensus.msg.rel_msg|const"><span class="entity_def" id="VDFConsensus.msg.set_msg|const"><span class="entity_def" id="VDFConsensus.msg.map_msg|const"><span class="entity_def" id="VDFConsensus.msg.dtor_msg|const"><span class="entity_def" id="VDFConsensus.msg.ctor_fold_msg|const"><span class="entity_def" id="VDFConsensus.msg.ctor_msg|const"><span class="entity_def" id="VDFConsensus.msg.str_init_msg|const"><span class="entity_def" id="VDFConsensus.msg.min_alg_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.wit_pre_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.pred_pre_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.rel_pre_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set2_pre_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.set1_pre_msg|const"><span class="entity_def" id="VDFConsensus.pre_msg.msg.map_pre_msg|const"><span class="entity_def" id="VDFConsensus.msg|type"><span class="entity_def" id="VDFConsensus.msg.msg_pre_msg|type"><span>msg</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="entity_def" id="VDFConsensus.msg.Val|const"><span>Val</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span> </span><span class="comment1"><span>― ‹A guessable value›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="VDFConsensus.msg.Nonce|const"><span>Nonce</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span> </span><span class="comment1"><span>― ‹A non-guessable nonce›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="VDFConsensus.msg.VDF|const"><span>VDF</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The VDF applied to a given message›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="VDFConsensus.msg.MSet|const"><span>MSet</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹A (finite) set of messages packed together in one message›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="VDFConsensus.msg.MPair|const"><span>MPair</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹A pair of two messages›</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"The depth of a message"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The depth of a message is the length of the longest VDF chain appearing in the message.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.depth.simps|fact"><span class="entity_def" id="VDFConsensus.depth_def|fact"><span class="entity_def" id="VDFConsensus.depth.simps(5)|thm"><span class="entity_def" id="VDFConsensus.depth.simps(4)|thm"><span class="entity_def" id="VDFConsensus.depth.simps(3)|thm"><span class="entity_def" id="VDFConsensus.depth.simps(2)|thm"><span class="entity_def" id="VDFConsensus.depth.simps(1)|thm"><span class="entity_def" id="VDFConsensus.depth_def|thm"><span class="entity_def" id="VDFConsensus.depth_def|axiom"><span>primrec</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.depth|const"><span>depth</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>depth</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Val|const"><span>Val</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>depth</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Nonce|const"><span>Nonce</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>depth</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>depth</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>depth</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty|const"><span>{||}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.linorder_class.fMax|const"><span>fMax</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fimage|const"><span>fimage</span></a><span> </span><span class="free"><span>depth</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹This is the max depth of messages in the set </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>depth</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MPair|const"><span>MPair</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max|const"><span>Orderings.max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>depth</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>depth</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDFConsensus.depth_MSet_1|fact"><span class="entity_def" id="VDFConsensus.depth_MSet_1|thm"><span>depth_MSet_1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="VDFConsensus.depth_MSet_2|fact"><span class="entity_def" id="VDFConsensus.depth_MSet_2|thm"><span>depth_MSet_2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty|const"><span>{||}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="bound"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fMax_in|fact"><span>fMax_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty_iff|fact"><span>fempty_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty_is_fimage|fact"><span>fempty_is_fimage</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fimageE|fact"><span>fimageE</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Example›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="main"><span>{|</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Val|const"><span>Val</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Val|const"><span>Val</span></a><span> </span><span class="numeral"><span>42</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Messages that the adversary can forge"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.parts.inducts|fact"><span class="entity_def" id="VDFConsensus.parts.simps|fact"><span class="entity_def" id="VDFConsensus.parts.induct|fact"><span class="entity_def" id="VDFConsensus.parts.cases|fact"><span class="entity_def" id="VDFConsensus.parts.intros|fact"><span class="entity_def" id="VDFConsensus.partsp_parts_eq|fact"><span class="entity_def" id="VDFConsensus.parts_def|fact"><span class="entity_def" id="VDFConsensus.partsp.inducts|fact"><span class="entity_def" id="VDFConsensus.partsp.simps|fact"><span class="entity_def" id="VDFConsensus.partsp.induct|fact"><span class="entity_def" id="VDFConsensus.partsp.cases|fact"><span class="entity_def" id="VDFConsensus.partsp.intros|fact"><span class="entity_def" id="VDFConsensus.parts.inducts|thm"><span class="entity_def" id="VDFConsensus.parts.simps|thm"><span class="entity_def" id="VDFConsensus.parts.induct|thm"><span class="entity_def" id="VDFConsensus.parts.cases|thm"><span class="entity_def" id="VDFConsensus.parts.intros(4)|thm"><span class="entity_def" id="VDFConsensus.parts.intros(3)|thm"><span class="entity_def" id="VDFConsensus.parts.intros(2)|thm"><span class="entity_def" id="VDFConsensus.parts.intros(1)|thm"><span class="entity_def" id="VDFConsensus.partsp_parts_eq|thm"><span class="entity_def" id="VDFConsensus.parts_def|thm"><span class="entity_def" id="VDFConsensus.partsp.inducts|thm"><span class="entity_def" id="VDFConsensus.partsp.simps|thm"><span class="entity_def" id="VDFConsensus.partsp.induct|thm"><span class="entity_def" id="VDFConsensus.partsp.cases|thm"><span class="entity_def" id="VDFConsensus.partsp.intros(4)|thm"><span class="entity_def" id="VDFConsensus.partsp.intros(3)|thm"><span class="entity_def" id="VDFConsensus.partsp.intros(2)|thm"><span class="entity_def" id="VDFConsensus.partsp.intros(1)|thm"><span class="entity_def" id="VDFConsensus.parts_def|axiom"><span class="entity_def" id="VDFConsensus.partsp_def|axiom"><span>inductive_set</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.parts|const"><span class="entity_def" id="VDFConsensus.partsp|const"><span>parts</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="entity"><span>msgs</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹All the parts that can be extracted from the set of messages </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>msgs</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MPair|const"><span>MPair</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MPair|const"><span>MPair</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>parts</span></span><span> </span><span class="free"><span>msgs</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.synth.inducts|fact"><span class="entity_def" id="VDFConsensus.synth.simps|fact"><span class="entity_def" id="VDFConsensus.synth.induct|fact"><span class="entity_def" id="VDFConsensus.synth.cases|fact"><span class="entity_def" id="VDFConsensus.synth.intros|fact"><span class="entity_def" id="VDFConsensus.synthp_synth_eq|fact"><span class="entity_def" id="VDFConsensus.synth_def|fact"><span class="entity_def" id="VDFConsensus.synthp.inducts|fact"><span class="entity_def" id="VDFConsensus.synthp.simps|fact"><span class="entity_def" id="VDFConsensus.synthp.induct|fact"><span class="entity_def" id="VDFConsensus.synthp.cases|fact"><span class="entity_def" id="VDFConsensus.synthp.intros|fact"><span class="entity_def" id="VDFConsensus.synth.inducts|thm"><span class="entity_def" id="VDFConsensus.synth.simps|thm"><span class="entity_def" id="VDFConsensus.synth.induct|thm"><span class="entity_def" id="VDFConsensus.synth.cases|thm"><span class="entity_def" id="VDFConsensus.synth.intros(5)|thm"><span class="entity_def" id="VDFConsensus.synth.intros(4)|thm"><span class="entity_def" id="VDFConsensus.synth.intros(3)|thm"><span class="entity_def" id="VDFConsensus.synth.intros(2)|thm"><span class="entity_def" id="VDFConsensus.synth.intros(1)|thm"><span class="entity_def" id="VDFConsensus.synthp_synth_eq|thm"><span class="entity_def" id="VDFConsensus.synth_def|thm"><span class="entity_def" id="VDFConsensus.synthp.inducts|thm"><span class="entity_def" id="VDFConsensus.synthp.simps|thm"><span class="entity_def" id="VDFConsensus.synthp.induct|thm"><span class="entity_def" id="VDFConsensus.synthp.cases|thm"><span class="entity_def" id="VDFConsensus.synthp.intros(5)|thm"><span class="entity_def" id="VDFConsensus.synthp.intros(4)|thm"><span class="entity_def" id="VDFConsensus.synthp.intros(3)|thm"><span class="entity_def" id="VDFConsensus.synthp.intros(2)|thm"><span class="entity_def" id="VDFConsensus.synthp.intros(1)|thm"><span class="entity_def" id="VDFConsensus.synth_def|axiom"><span class="entity_def" id="VDFConsensus.synthp_def|axiom"><span>inductive_set</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.synth|const"><span class="entity_def" id="VDFConsensus.synthp|const"><span>synth</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="entity"><span>msgs</span></span><span> </span><span class="entity"><span>nonces</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹This is all the messages that the attacker can synthesize if it has the set of messages </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>msgs</span></span></span><span class="antiquote"><span>}</span></span></span><span>,
    where </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>nonces</span></span></span><span class="antiquote"><span>}</span></span></span><span> is the set of nonces that have already been used›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts|const"><span>parts</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>synth</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Val|const"><span>Val</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>synth</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Values can be guessed›</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="free"><span>nonces</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Nonce|const"><span>Nonce</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>synth</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts|const"><span>parts</span></a><span> </span><span class="free"><span>msgs</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts|const"><span>parts</span></a><span> </span><span class="free"><span>msgs</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MPair|const"><span>MPair</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m2</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>synth</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts|const"><span>parts</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>synth</span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.synth_vdf_def|fact"><span class="entity_def" id="VDFConsensus.synth_vdf_def|thm"><span class="entity_def" id="VDFConsensus.synth_vdf_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.synth_vdf|const"><span>synth_vdf</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹The messages that the adversary can synthesis if it can compute one VDF output›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>synth_vdf</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>msgs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nonces</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>syn</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>msgs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nonces</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span>
    </span><span class="main"><span>⋃</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="bound"><span>syn</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>syn</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="bound"><span>m</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>nonces</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2332..2337">lemma</span></span></span><span> </span><span class="entity_def" id="VDFConsensus.parts_depth|fact"><span class="entity_def" id="VDFConsensus.parts_depth|thm"><span>parts_depth</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts|const"><span>parts</span></a><span> </span><span class="free"><span>msgs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2332..2337"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2332..2337"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>m1</span></span><span> </span><span class="skolem"><span>m2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>m1</span></span><span> </span><span class="skolem"><span>m2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth_MSet_1|fact"><span>depth_MSet_1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
Main lemma: the adversary cannot forge a message that has larger depth than any message it already has.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2843..2848">lemma</span></span></span><span> </span><span class="entity_def" id="VDFConsensus.synth_depth|fact"><span class="entity_def" id="VDFConsensus.synth_depth|thm"><span>synth_depth</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>nonces</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2843..2848"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2843..2848"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts_depth|fact"><span>parts_depth</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>m1</span></span><span> </span><span class="skolem"><span>m2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2843..2848"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts_depth|fact"><span>parts_depth</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_2843..2848"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth.simps|fact"><span>depth.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth_MSet_2|fact"><span>depth_MSet_2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_nat_zero_code|fact"><span>less_nat_zero_code</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_le|fact"><span>linorder_not_le</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.parts_depth|fact"><span>parts_depth</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3403..3408">lemma</span></span></span><span> </span><span class="entity_def" id="VDFConsensus.synth_vdf_depth|fact"><span class="entity_def" id="VDFConsensus.synth_vdf_depth|thm"><span>synth_vdf_depth</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>nonces</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_vdf|const"><span>synth_vdf</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3608..3612">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="skolem"><span>m'</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>m'</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="skolem"><span>m'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3403..3408"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_depth|fact"><span>synth_depth</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3608..3612"><span>that</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3808..3813">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth|const"><span>depth</span></a><span> </span><span class="skolem"><span>m''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="free"><span>msgs</span></span><span> </span><span class="free"><span>nonces</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="skolem"><span>m'</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m''</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_eq_plus1|fact"><span>Suc_eq_plus1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3403..3408"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.depth.simps|fact"><span>depth.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.not_less_eq_eq|fact"><span>not_less_eq_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.singleton_iff|fact"><span>singleton_iff</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_depth|fact"><span>synth_depth</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3808..3813"><span>that</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.trans_le_add1|fact"><span>trans_le_add1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_depth|fact"><span>synth_depth</span></a><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3608..3612"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_3403..3408"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_vdf_def|fact"><span>synth_vdf_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"The model"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model_state.axioms|fact"><span class="entity_def" id="VDFConsensus.model_state.intro|fact"><span class="entity_def" id="VDFConsensus.model_state_def|fact"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms|fact"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.intro|fact"><span class="entity_def" id="VDFConsensus.model_state_valuetypes_def|fact"><span class="entity_def" id="VDFConsensus.model_state_namespace.distinct_names|fact"><span class="entity_def" id="VDFConsensus.model_state_namespace.intro|fact"><span class="entity_def" id="VDFConsensus.model_state_namespace_def|fact"><span class="entity_def" id="VDFConsensus.model_state|locale"><span class="entity_def" id="VDFConsensus.model_state_valuetypes|locale"><span class="entity_def" id="VDFConsensus.model_state_namespace|locale"><span class="entity_def" id="VDFConsensus.model_state.axioms(2)|thm"><span class="entity_def" id="VDFConsensus.model_state.axioms(1)|thm"><span class="entity_def" id="VDFConsensus.model_state.intro|thm"><span class="entity_def" id="VDFConsensus.model_state_def|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(8)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(7)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(6)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(5)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(4)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(3)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(2)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.axioms(1)|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes.intro|thm"><span class="entity_def" id="VDFConsensus.model_state_valuetypes_def|thm"><span class="entity_def" id="VDFConsensus.model_state_namespace.distinct_names|thm"><span class="entity_def" id="VDFConsensus.model_state_namespace.intro|thm"><span class="entity_def" id="VDFConsensus.model_state_namespace_def|thm"><span class="entity_def" id="VDFConsensus.model_state_def|axiom"><span class="entity_def" id="VDFConsensus.model_state_valuetypes_def|axiom"><span class="entity_def" id="VDFConsensus.model_state_namespace_def|axiom"><span class="entity_def" id="VDFConsensus.model_state|const"><span class="entity_def" id="VDFConsensus.model_state_valuetypes|const"><span class="entity_def" id="VDFConsensus.model_state_namespace|const"><span>statespace</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'p</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'o</span></span><span class="main"><span>)</span></span><span> model_state </span><span class="main"><span>=</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span class="tfree"><span>'p</span></span></span><span class="antiquote"><span>}</span></span></span><span> is the type of player IDs›</span></span><span>
  round </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The current round›</span></span><span>
  adv </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The players controlled by the adversary in the current round›</span></span><span>
  wb </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The well-behaved players in the current round›</span></span><span>
  vdf_processors </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹How many parallel VDF processors a each participant has in the current round›</span></span><span>
  msgs </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The mailbox of each player. TODO: probably need the sender.›</span></span><span>
  outputs </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'o</span></span><span>"</span></span></span><span>
  adv_knowledge </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The information that the adversary collected, i.e. all messages ever sent›</span></span><span>
  prev_msgs </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹A history variable tracking the messages sent in the previous round›</span></span><span>
  nonces </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹set of nonces used›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.axioms|fact"><span class="entity_def" id="VDFConsensus.model.intro|fact"><span class="entity_def" id="VDFConsensus.model_def|fact"><span class="entity_def" id="VDFConsensus.model.axioms|thm"><span class="entity_def" id="VDFConsensus.model.intro|thm"><span class="entity_def" id="VDFConsensus.model_def|thm"><span class="entity_def" id="VDFConsensus.model_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="VDFConsensus.model|locale"><span class="entity_def" id="VDFConsensus.model|const"><span>model</span></span></span><span> </span><span class="main"><span>=</span></span><span>  </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.model_state|locale"><span>model_state</span></a><span>
  </span><span class="comment1"><span>― ‹Hack to fix type variable names; is there a better way? Note that a state has type </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'name</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="tfree"><span>'value</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> project_'a_VDFConsensus_msg_FSet_fset_'p_fun</span><span class="main"><span>=</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>project_'a_VDFConsensus_msg_FSet_fset_'p_fun</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'value</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> inject_'o_'p_fun</span><span class="main"><span>=</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inject_'o_'p_fun</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'o</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> round</span><span class="main"><span>=</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>round</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'name</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>project_'a_VDFConsensus_msg_FSet_fset_'p_fun</span></span><span> </span><span class="free"><span>inject_'o_'p_fun</span></span><span> </span><span class="free"><span>round</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>send_fn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Determines what message a well-behaved player sends each round, as a function of the messages it receives›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>out</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg|type"><span>msg</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset|type"><span>fset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'o</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Determines an output each round›</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions_def|fact"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions_def|thm"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions.cong|fact"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions.cong|thm"><span class="entity_def" id="VDFConsensus.model.vdf_assumptions|const"><span class="entity_def" id="offset_5626..5641">vdf_assumptions</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vdf_assumptions</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> 
    </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.comm_monoid_add_class.fsum|const"><span>fsum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>vdf_processors</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.comm_monoid_add_class.fsum|const"><span>fsum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>vdf_processors</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>wb</span><span class="main"><span>)</span></span><span>
      </span><span class="comment1"><span>― ‹Adversary has less VDF processors than well-behaved players have›</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>wb</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty|const"><span>{||}</span></a></span><span>
      </span><span class="comment1"><span>― ‹At least one well-behaved player›</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.comm_monoid_add_class.fsum|const"><span>fsum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>vdf_processors</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>wb</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
      </span><span class="comment1"><span>― ‹Well-behaved players can compute at least 1 VDF output›</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.wb_msg_def|fact"><span class="entity_def" id="VDFConsensus.model.wb_msg_def|thm"><span class="entity_def" id="VDFConsensus.model.wb_msg_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.model.wb_msg.cong|fact"><span class="entity_def" id="VDFConsensus.model.wb_msg.cong|thm"><span class="entity_def" id="VDFConsensus.model.wb_msg|const"><span>wb_msg</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wb_msg</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>nonce</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>nonce</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>nonces</span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.VDF|const"><span>VDF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MPair|const"><span>MPair</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.Nonce|const"><span>Nonce</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.msg.MSet|const"><span>MSet</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
      </span><span class="comment1"><span>― ‹We just pack all the messages received along with a fresh nonce in a VDF›</span></span><span>
      </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>&lt;</span></span><span>nonces </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>nonces</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>n</span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span> msgs </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.funion|const"><span>|∪|</span></a></span><span> </span><span class="main"><span>{|</span></span><span class="bound"><span>m</span></span><span class="main"><span>|}</span></span><span class="main"><span>&gt;</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹TODO: fix starting from here›</span></span></span><span>

</span><span class="comment1"><span>(*
definition wb_send_msgs where
  "wb_send_msgs s ≡ ffold (λ p s . wb_send_msg p s) s (s⋅wb)" *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.adv_msgs_def|fact"><span class="entity_def" id="VDFConsensus.model.adv_msgs_def|thm"><span class="entity_def" id="VDFConsensus.model.adv_msgs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.model.adv_msgs.cong|fact"><span class="entity_def" id="VDFConsensus.model.adv_msgs.cong|thm"><span class="entity_def" id="VDFConsensus.model.adv_msgs|const"><span>adv_msgs</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹This is the possible set of messages that the adversary can send each round›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>adv_msgs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>msgs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>vdf_msgs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> 
    </span><span class="bound"><span>vdf_msgs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_vdf|const"><span>synth_vdf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>nonces</span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="bound"><span>vdf_msgs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.comm_monoid_add_class.fsum|const"><span>fsum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>vdf_processors</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv</span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>msgs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth|const"><span>synth</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>nonces</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="bound"><span>vdf_msgs</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.init_def|fact"><span class="entity_def" id="VDFConsensus.model.init_def|thm"><span class="entity_def" id="VDFConsensus.model.init_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.model.init.cong|fact"><span class="entity_def" id="VDFConsensus.model.init.cong|thm"><span class="entity_def" id="VDFConsensus.model.init|const"><span>init</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>init</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>round </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty|const"><span>{||}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_5626..5641"><span>vdf_assumptions</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>nonces</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="VDFConsensus.model.next_round_def|fact"><span class="entity_def" id="VDFConsensus.model.next_round_def|thm"><span class="entity_def" id="VDFConsensus.model.next_round_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="VDFConsensus.model.next_round.cong|fact"><span class="entity_def" id="VDFConsensus.model.next_round.cong|thm"><span class="entity_def" id="VDFConsensus.model.next_round|const"><span>next_round</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>next_round</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span class="main"><span>⋅</span></span><span>round </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>round</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#offset_5626..5641"><span>vdf_assumptions</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>ms</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ms</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="VDFConsensus.html#VDFConsensus.synth_vdf|const"><span>synth_vdf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.FSet.html#FSet.funion|const"><span>|∪|</span></a></span><span> </span><span class="bound"><span>ms</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span class="main"><span>⋅</span></span><span>outputs </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>out</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>round</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>⋅</span></span><span>adv_knowledge</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fset.fset|const"><span>fset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s'</span></span></span></span><span class="main"><span>⋅</span></span><span>msgs</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="comment1"><span>(*
section "The Russian-doll protocol"

text ‹Now we define a transition system modeling a distributed algorithm›

text ‹
We'll want to prove that, in a round r, no message has depth more than r, and that each player receives more
 depth-r messages from well-behaved players than from the adversary.›
   
statespace ('a, 'p) vars =
  round :: "nat"
  adv :: "'p set" ― ‹The players controlled by the adversary in the current round›
  wb :: "'p set" ― ‹The well-behaved players in the current round›
  vdf_processors :: "'p ⇒ nat" ― ‹How many parallel VDF processors a each participant has in the current round›
  msgs :: "'p ⇒ ('a msg) set" ― ‹The mailbox of each participant›
  round_done :: "'p ⇒ bool" ― ‹Whether a process has taken a step this round›

context vars
begin

definition init where
  "init s ≡ s⋅round = 1 ∧ (∀ p . ¬ (s⋅round_done) p)"

definition next_round where
  "next_round s s' ≡
    (∀ p ∈ fset ((s⋅adv) |∪| (s⋅wb)) . (s⋅round_done) p)
    ∧ (∃ a w . w ≠ {||} ∧ fcard w &gt; fcard a ∧
        s' = s&lt;round := (s⋅round) + 1, adv := a, wb := w, round_done := λ p . False&gt;)"

definition trans_rel where
  "trans_rel s s' ≡ next_round s s'"

definition inductive_invariant where
  "inductive_invariant P ≡
    (∀ s . init s ⟶ P s) ∧ (∀ s s' . P s ∧ trans_rel s s' ⟶ P s')"

declare inductive_invariant_def[simp]
declare trans_rel_def[simp]
declare next_round_def[simp]
declare init_def[simp]

lemma round_ge_1:
  "inductive_invariant (λ s . (s⋅round) ≥ 1)" by auto

                                        
end *)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>